基础命令


|       命令       |                          作用                           |
|:----------------:|:-------------------------------------------------------:|
|       :pwd       |                    打印当前工作目录                     |
| :edit {文件路径} | 打开相对工作目录的文件路径{打开文件后工作路径不会被修改 |
|      :edit       |                写入原文件数据(回滚数据)                 |
|   :edit % tab    |              快速输入当前缓冲区的完整路径               |
| :edit %:p:h tab  |              快速输入当前缓冲区的工作目录               |

% 代表活动缓冲区的完整路径 Tab 将其展开
:h  去除文件名 但保留路径的其他部分

---

- #### find 打开文件
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 使用 :find 命令前需要我们指定一些目录,当调用这个命令时就会从这些目录中进行查找 

    ```vim
    :set path+={路径}  "添加path路径
    ```

    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如果查找的目录中有2个或以上的同名文件时,按下`tab`键会展开第一个匹配文件的完整目录, 再按一次会换成下一个匹配文件的完整路径, 如果开始就没有按`tab`键就会匹配第一个满足条件的文件

- #### netrw 管理文件
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 启用 `netrw` 插件的配置

    ```
    set nocompatible
    filetype plugin on
    ```

    shell 命令

    | 命令   | 作用                   |
    |--------|------------------------|
    | vim .  | 打开当前缓冲的工作目录 |
    | vim .. | 打开上级目录           |

    nertw 命令

    | 命令      | 作用                                       |
    |-----------|--------------------------------------------|
    | :edit .   | 打开文件管理器, 并显示当前工作目录         |
    | :Explore  | 打开文件管理器, 并显示活动缓冲区所在的目录 |
    | :Sexplore | 在水切分窗口打开文件管理器                 |
    | :Vexplore | 在垂直切分窗口打开文件管理器               |

- #### 将文件保存到不存在的目录
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 即使缓冲区路径中包含了不存在的目录,vim仍然运行对该缓冲区进行编辑,只是在写入时会报错


    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 使用 `:edit {路径}` 命令时如果打开的是一个不存在的文件路径 vim 就会创建一个新的空白缓冲区按下 `<C-g>` 就会看到缓冲区被表示为 **新文件** 此时如果用 `wirte` 命令则会报错, 可以调用外部命令进行补救


    ```vim
    :!mkdir -p %:h
    :write
    ```
- #### 以超级用户权限保存文件
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 以超级用户权限保存文件并不奇怪, 但是它不能在 gvim 上运行, 只有在 unix 系统的终端下才能比较好的工作
    
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vim 不会阻止我们修改一个只读缓冲区,但它不会让我们以通常的方法把修改保存到硬盘上
即使加了 ! 号 没有权限依然无法写入到硬盘

    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如果已经是 root 用户的话 补救方法是 采用下面这条奇怪的命令
    ```vim
    :w !sudo tee % > /dev/null 
    ```
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 输入用户密码 警告我们文件已被修改,并显示出一个选项菜单 , 这里会建议按 l 键重新将文件载入缓冲区

    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `:write !{cmd}` 命令会把缓冲区的内容作为标准输入给指定的 {cmd} {cmd} 可以是任意的外部程序 虽然vim 仍然是以 用户运行的 ,但是可以让调用的外部进程以超级用户权限运行 , `tee` 程序将 **sudo** 权限运行 也就是说它拥有写 `/etc/hosts` 文件的权限 在vim 命令行中 `%` 符号有展开完整路径的含义 所有后半部分也可以展开为 `tee /etc/hosts > dev/null` 这条命令会把缓冲区的内容当作标准输入

    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这时 vim 会检测到文件已经被一个外部程序修改 这意味着缓冲区的内容和文件不同步了 这就是为什么 vim 会建议我们将文件重新载入缓冲区 

